<!DOCTYPE html>
<html>
<head>
  <title>Image Upload</title>
</head>
<body>
  <h1>Image Upload</h1>
  
  <form id="uploadForm" enctype="multipart/form-data">
    <input type="file" name="imageFile" id="imageFile">
    <input type="submit" value="Upload">
  </form>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Get the CSRF token from the cookie
      function getCSRFToken() {
        const cookieValue = document.cookie
          .split('; ')
          .find(row => row.startsWith('csrftoken='))
          .split('=')[1];
        return cookieValue;
      }

      // Handle form submission
      document.getElementById('uploadForm').addEventListener('submit', function(event) {
        event.preventDefault();

        // Get the selected image file
        const imageFile = document.getElementById('imageFile').files[0];

        // Create a FormData object to send the file
        const formData = new FormData();
        formData.append('imageFile', imageFile);

        // Send the POST request
        fetch('/accounts/user_info/', {
          method: 'POST',
          body: formData,
          headers: {
            'X-CSRFToken': getCSRFToken()
          }
        })
        .then(response => response.json())
        .then(data => {
          // Handle the response
          console.log(data);
        })
        .catch(error => {
          // Handle the error
          console.error(error);
        });
      });
    });
  </script>
</body>
</html>